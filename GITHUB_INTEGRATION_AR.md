# تكامل GitHub في تطبيق Portfolio Maker

هذا المستند يشرح كيفية عمل تكامل GitHub في تطبيق Portfolio Maker.

## الميزات

- **مصادقة GitHub**: يسجل المستخدمون الدخول باستخدام حسابات GitHub الخاصة بهم
- **جلب المستودعات**: جلب المستودعات العامة للمستخدم من GitHub
- **استيراد المشاريع**: استيراد مستودعات GitHub كمشاريع في البورتفوليو
- **تعيين البيانات تلقائيًا**: استخراج تفاصيل المشروع تلقائيًا من مستودعات GitHub

## كيف يعمل

### 1. المصادقة

يستخدم التطبيق NextAuth.js مع مزود GitHub لمصادقة المستخدمين:

```javascript
GitHubProvider({
  clientId: process.env.GITHUB_ID!,
  clientSecret: process.env.GITHUB_SECRET!,
  authorization: {
    params: {
      scope: 'read:user user:email',
    },
  },
})
```

عندما يسجل المستخدم الدخول، يتم تخزين اسم مستخدم GitHub الخاص به في جلسة المستخدم.

### 2. جلب المستودعات

يقوم التطبيق بجلب مستودعات GitHub الخاصة بالمستخدم باستخدام واجهة برمجة تطبيقات GitHub:

1. يقوم العميل بإرسال طلب إلى نقطة النهاية `/api/github`
2. يتحقق الخادم من جلسة المستخدم ويسترجع اسم مستخدم GitHub الخاص به
3. يقوم الخادم بإرسال طلب إلى واجهة برمجة تطبيقات GitHub: `https://api.github.com/users/{username}/repos`
4. يتم تعيين الاستجابة إلى واجهة GitHubRepo الخاصة بالتطبيق وإعادتها إلى العميل

### 3. استيراد المشروع

يمكن للمستخدمين استيراد المستودعات كمشاريع:

1. يختار المستخدم المستودعات من مكون GitHubSync
2. يرسل العميل طلب POST إلى `/api/github` مع الاسم الكامل للمستودع
3. يجلب الخادم تفاصيل المستودع من GitHub
4. ينشئ الخادم مشروعًا جديدًا ببيانات المستودع
5. يتم حفظ المشروع في قاعدة البيانات وإعادته إلى العميل

### 4. تعيين البيانات

يتم تعيين بيانات مستودع GitHub إلى بيانات المشروع:

- اسم المستودع ← عنوان المشروع
- وصف المستودع ← وصف المشروع
- رابط المستودع ← رابط GitHub
- الصفحة الرئيسية للمستودع ← رابط العرض التجريبي
- لغة المستودع والموضوعات ← التقنيات
- نوع المستودع ← فئة المشروع

## تفاصيل التنفيذ

### المكونات

- **GitHubSync**: مكون واجهة المستخدم لجلب واختيار المستودعات
- **ProjectModal**: نافذة منبثقة لتحرير تفاصيل المشروع بعد الاستيراد

### مسارات API

- **GET /api/github**: يجلب مستودعات GitHub الخاصة بالمستخدم
- **POST /api/github**: يستورد مستودعًا كمشروع

### وظائف المساعدة

- **fetchGitHubRepositories**: يجلب المستودعات من واجهة برمجة تطبيقات GitHub
- **importGitHubRepository**: يستورد مستودعًا كمشروع
- **determineCategory**: يحدد فئة المشروع بناءً على بيانات المستودع

## التكوين

لاستخدام تكامل GitHub، تأكد من تعيين متغيرات البيئة هذه:

```
GITHUB_ID=your-github-client-id
GITHUB_SECRET=your-github-client-secret
NEXTAUTH_URL=your-app-url
NEXTAUTH_SECRET=your-secret-key
```

للحصول على حدود معدل أعلى، يمكنك أيضًا توفير رمز واجهة برمجة تطبيقات GitHub:

```
GITHUB_API_TOKEN=your-github-personal-access-token
```

## استكشاف الأخطاء وإصلاحها

- إذا لم يتم تحميل المستودعات، تحقق من اسم مستخدم GitHub في ملف تعريف المستخدم
- إذا فشل الاستيراد، تحقق من حدود معدل واجهة برمجة تطبيقات GitHub
- تحقق من وحدة التحكم في المتصفح للحصول على رسائل خطأ مفصلة
